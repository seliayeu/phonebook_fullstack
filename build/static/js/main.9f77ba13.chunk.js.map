{"version":3,"sources":["services/persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","exporting","getAll","axios","get","create","newPerson","post","update","id","person","put","del","delete","Notification","message","error","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","Person","name","number","Filter","props","onSubmit","event","preventDefault","value","filter","onChange","handleFilterChange","EntryForm","addEntry","newName","handleNameChagne","newNumber","handleNumberChange","type","DeleteButton","target","persons","setPersons","setShown","shown","onClick","window","confirm","console","log","personService","then","response","App","useState","setNewName","setNewNumber","setFilter","errorStatus","setErrorStatus","notification","setNotification","deleted","setDeleted","useEffect","data","length","toLocaleLowerCase","includes","personObject","map","p","setTimeout","catch","forceUpdate","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9f77ba13.chunk.js","sourcesContent":["import axios from \"axios\"\r\nconst baseUrl = \"/api/persons\"\r\n\r\nconst getAll = () => (\r\n    axios\r\n        .get(baseUrl)\r\n)\r\n\r\nconst create = newPerson => (\r\n    axios\r\n        .post(baseUrl, newPerson)\r\n)\r\n\r\nconst update = (id, person) => (\r\n    axios  \r\n        .put(`${baseUrl}/${id}`, person)\r\n)\r\n\r\nconst del = (id) => (\r\n    axios  \r\n        .delete(`${baseUrl}/${id}`)\r\n)\r\n\r\nconst exporting = {\r\n    getAll, create, update, del\r\n}\r\n\r\nexport default exporting","const Notification = ({ message, error }) => {\r\n    const errorStyle = {\r\n        color: \"red\",\r\n        background: \"lightgrey\",\r\n        fontSize: 20,\r\n        borderStyle: \"solid\",\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10   \r\n    }\r\n    const notificationStyle = {\r\n        color: \"green\",\r\n        background: \"lightgrey\",\r\n        fontSize: 20,\r\n        borderStyle: \"solid\",\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10   \r\n    }\r\n\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div style={errorStyle}>\r\n                {message}\r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div style={notificationStyle}>\r\n                {message}\r\n            </div>\r\n        )        \r\n    }\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Notification from \"./components/Notification\"\n\nconst Person = ({ person }) => (\n  <div key={person.name}>{person.name} {person.number}</div>\n)\n\nconst Filter = (props) => {\n  const addFilter = (event) =>{\n    event.preventDefault()\n  }\n  return (\n    <form onSubmit={addFilter}>\n      <div>\n        filter shown with \n        <input\n          value={props.filter}\n          onChange={props.handleFilterChange}\n        />\n      </div>\n    </form>\n  )\n}\n\nconst EntryForm = (props) => {\n  return(\n    <form onSubmit={props.addEntry}>\n    <div>\n      name: \n      <input\n        value={props.newName}\n        onChange={props.handleNameChagne} \n      />\n      <br></br>\n      number:\n      <input\n        value={props.newNumber}\n        onChange={props.handleNumberChange}\n      />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  )\n}\n\nconst DeleteButton = ({ target, persons, setPersons, setShown, shown }) => {\n  const onDeletePress = (event) => {\n    event.preventDefault()\n    if (window.confirm(`do you truly want to delte ${target.name}`)) {\n      console.log(target)\n      personService\n        .del(target.id)\n        .then(response => {\n          setPersons(persons.filter(person => person !== target))\n          setShown(shown.filter(person => person !== target))\n        })\n    }\n  } \n  return (\n    <button onClick={onDeletePress}>delete</button>\n  )\n\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState(\"\")\n  const [ newNumber, setNewNumber ] = useState(\"\")\n  const [ filter, setFilter] = useState(\"\")\n  const [ errorStatus, setErrorStatus ] = useState(false)\n  const [ notification, setNotification ] = useState(null)\n  const [ shown, setShown ] = useState([])\n  const [ deleted, setDeleted ] = useState(false)\n\n  useEffect(() => {\n    console.log(\"effect\")\n    personService\n      .getAll()\n      .then(response => {\n        console.log(\"promise fulfilled\")\n        setPersons(response.data)\n        setShown(response.data)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n  console.log(persons)\n\n  const addEntry = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    for (let person of persons) {\n      if (person.name === newName) {\n        if (window.confirm(`${person.name} is already in this wonderful phonebook. would u like to update their cool number with a new one?`)) {\n          personService\n            .update(person.id, personObject)\n            .then(response => {\n              console.log(\"updating\")\n              console.log(response.data)\n              setPersons(persons.map(p => p.name === response.data.name ? response.data : p))\n              setShown(shown.map(p => p.name === response.data.name ? response.data : p))\n      \n              console.log(persons)\n            })\n            .then(response => {\n              setErrorStatus(false)\n              setNotification(`Changed ${person.name}'s number successfully :D`)\n              setTimeout(() => {\n                setNotification(null)\n              }, 3000)\n              }\n            )\n            .catch(error => {\n              setErrorStatus(true)\n              setNotification(`Info of ${person.name} already deleted sorry chummo`)\n              setPersons(persons.filter(p => p.name !== person.name))\n              if (person.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase())) {\n                setShown(shown.filter(p => p.name !== person.name))\n              }\n              this.forceUpdate()\n              setDeleted(true)\n              setTimeout(() => {\n                setNotification(null)\n              }, 5000)\n              return\n            })\n        }\n        return\n      }\n    }\n    if (!deleted) {\n    personService\n      .create(personObject)\n      .then(response => {\n        setPersons(persons.concat(response.data)) \n        if (personObject.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase())) {\n          setShown(shown.concat(personObject))\n        }\n        setNewName(\"\") \n        setNewNumber(\"\")\n      })\n      .then(response => {\n        setErrorStatus(false)\n        setNotification(`Added ${personObject.name}'s number successfully :D`)\n        setTimeout(() => {\n          setNotification(null)\n        }, 3000)\n        })\n    setPersons(persons.concat(personObject))\n    setNewName(\"\")\n    setNewNumber(\"\")\n  } else {\n    setDeleted(false)\n  }\n  }\n\n  const handleNameChagne = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n    setShown(persons.filter(person => \n      person.name.toLocaleLowerCase().includes(event.target.value.toLocaleLowerCase())\n    ))\n  }\n\n  console.log(persons)\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} error={errorStatus} />\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n      <h2>add a new</h2>\n      <EntryForm handleNameChagne={handleNameChagne} handleNumberChange={handleNumberChange} newName={newName} addEntry={addEntry} newNumber={newNumber}/>\n      <h2>Numbers</h2>\n        {\n          shown ? \n          shown.map(person => ([\n            <Person key={person.name} person={person} />,\n            <DeleteButton key={`del ${person.name}`} target={person} setPersons={setPersons} persons={persons} setShown={setShown} shown={shown} />\n          ]))\n          :\n          (<div></div>)\n        }\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)\n"],"sourceRoot":""}